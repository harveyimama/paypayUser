package com.techland.paypay.annotations;import com.techland.paypay.contracts.PayPayEvent;import java.sql.Timestamp;import com.fasterxml.jackson.databind.JsonNode;import com.fasterxml.jackson.databind.ObjectMapper;import com.techland.paypay.user.events.UserAddedEvent;import com.techland.paypay.user.events.UserStatusChangedEvent;public class EventFactory {static PayPayEvent paypayEvent;	public EventFactory(PayPayEvent evt) { paypayEvent = evt;} @SuppressWarnings("unchecked") public static <T extends PayPayEvent> T getEvent(String event,String name) {try {if ("User.UserAddedEvent".equals(name)){ObjectMapper mapper = new ObjectMapper();JsonNode actualObj = mapper.readTree(event);Timestamp t = new Timestamp(actualObj.get("timestamp").asLong());UserAddedEvent u =  new UserAddedEvent(actualObj.get("userType").asText(),actualObj.get("id").asText(),actualObj.get("username").asText(),actualObj.get("password").asText(),actualObj.get("email").asText(),actualObj.get("fullname").asText(),actualObj.get("role").asText(),actualObj.get("status").asText(),t,actualObj.get("eventId").asText()); return (T) u;} else if ("User.UserStatusChangedEvent".equals(name)){ObjectMapper mapper = new ObjectMapper();JsonNode actualObj = mapper.readTree(event);Timestamp t = new Timestamp(actualObj.get("timestamp").asLong());UserStatusChangedEvent u =  new UserStatusChangedEvent(actualObj.get("status").asText(),t,actualObj.get("eventId").asText(),actualObj.get("id").asText()); return (T) u;}else {return null;}} catch (Exception e) {e.printStackTrace();return null;}}}